{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { createSelector } from \"reselect\";\nimport { deals } from \"../../data/DealsData\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nvar initialState = {\n  cartList: deals\n};\nvar cartSlice = createSlice({\n  name: \"cart\",\n  initialState: initialState,\n  reducers: {\n    toggleAddedtocart: function toggleAddedtocart(state, action) {\n      var _action$payload = action.payload,\n        id = _action$payload.id,\n        userEmail = _action$payload.userEmail;\n      var item = state.cartList.find(function (item) {\n        return item.id === id;\n      });\n      if (item) {\n        if (item.addedtocart === false) {\n          item.count = 1;\n        } else {\n          item.count = 0;\n        }\n        item.addedtocart = !item.addedtocart;\n        saveCartToStorage(state.cartList, userEmail);\n      }\n    },\n    setCart: function setCart(state, action) {\n      state.cartList = action.payload;\n    },\n    incrementCount: function incrementCount(state, action) {\n      var _action$payload2 = action.payload,\n        id = _action$payload2.id,\n        userEmail = _action$payload2.userEmail;\n      var item = state.cartList.find(function (item) {\n        return item.id === id;\n      });\n      if (item) {\n        item.count = item.count + 1;\n        saveCartToStorage(state.cartList, userEmail);\n      }\n    },\n    decrementCount: function decrementCount(state, action) {\n      var _action$payload3 = action.payload,\n        id = _action$payload3.id,\n        userEmail = _action$payload3.userEmail;\n      var item = state.cartList.find(function (item) {\n        return item.id === id;\n      });\n      if (item) {\n        if (item.count <= 1) {\n          item.count = 0;\n          item.addedtocart = !item.addedtocart;\n        } else {\n          item.count = item.count - 1;\n        }\n        saveCartToStorage(state.cartList, userEmail);\n      }\n    }\n  }\n});\nvar _cartSlice$actions = cartSlice.actions,\n  toggleAddedtocart = _cartSlice$actions.toggleAddedtocart,\n  setCart = _cartSlice$actions.setCart,\n  incrementCount = _cartSlice$actions.incrementCount,\n  decrementCount = _cartSlice$actions.decrementCount;\nexport { toggleAddedtocart, setCart, incrementCount, decrementCount };\nexport var selectCartList = function selectCartList(state) {\n  return state.cart.cartList;\n};\nexport var selectCartItems = createSelector([selectCartList], function (cartList) {\n  return cartList.filter(function (item) {\n    return item.addedtocart;\n  });\n});\nvar saveCartToStorage = function () {\n  var _ref = _asyncToGenerator(function* (cartData, userEmail) {\n    try {\n      var CART_STORAGE_KEY = `@MyApp:cart:${userEmail}`;\n      yield AsyncStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cartData));\n    } catch (error) {\n      console.error(\"Error saving cart data to AsyncStorage:\", error);\n    }\n  });\n  return function saveCartToStorage(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var loadCartFromStorage = function loadCartFromStorage(mail_id) {\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch) {\n      try {\n        var CART_STORAGE_KEY = `@MyApp:cart:${mail_id}`;\n        var cartData = yield AsyncStorage.getItem(CART_STORAGE_KEY);\n        if (cartData) {\n          dispatch(setCart(JSON.parse(cartData)));\n        }\n      } catch (error) {\n        console.error(\"Error loading cart data from AsyncStorage:\", error);\n      }\n    });\n    return function (_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","createSelector","deals","AsyncStorage","initialState","cartList","cartSlice","name","reducers","toggleAddedtocart","state","action","_action$payload","payload","id","userEmail","item","find","addedtocart","count","saveCartToStorage","setCart","incrementCount","_action$payload2","decrementCount","_action$payload3","_cartSlice$actions","actions","selectCartList","cart","selectCartItems","filter","_ref","_asyncToGenerator","cartData","CART_STORAGE_KEY","setItem","JSON","stringify","error","console","_x","_x2","apply","arguments","loadCartFromStorage","mail_id","_ref2","dispatch","getItem","parse","_x3","reducer"],"sources":["C:/Users/Sailesh/Desktop/Hubspire/react-native/expoapp/app/redux/reducers/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { createSelector } from \"reselect\";\r\nimport { deals } from \"../../data/DealsData\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nconst initialState = {\r\n  cartList: deals,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n  name: \"cart\",\r\n  initialState,\r\n  reducers: {\r\n    toggleAddedtocart: (state, action) => {\r\n      const { id, userEmail } = action.payload;\r\n      const item = state.cartList.find((item) => item.id === id);\r\n      if (item) {\r\n        if (item.addedtocart === false) {\r\n          item.count = 1;\r\n        } else {\r\n          item.count = 0;\r\n        }\r\n        item.addedtocart = !item.addedtocart;\r\n        saveCartToStorage(state.cartList, userEmail);\r\n      }\r\n    },\r\n    setCart: (state, action) => {\r\n      state.cartList = action.payload;\r\n    },\r\n    incrementCount: (state, action) => {\r\n      const { id, userEmail } = action.payload;\r\n      const item = state.cartList.find((item) => item.id === id);\r\n      if (item) {\r\n        item.count = item.count + 1;\r\n        saveCartToStorage(state.cartList, userEmail);\r\n      }\r\n    },\r\n    decrementCount: (state, action) => {\r\n      const { id, userEmail } = action.payload;\r\n      const item = state.cartList.find((item) => item.id === id);\r\n      if (item) {\r\n        if (item.count <= 1) {\r\n          item.count = 0;\r\n          item.addedtocart = !item.addedtocart;\r\n        } else {\r\n          item.count = item.count - 1;\r\n        }\r\n        saveCartToStorage(state.cartList, userEmail);\r\n      }\r\n    },\r\n  },\r\n});\r\n\r\nexport const { toggleAddedtocart, setCart, incrementCount, decrementCount } =\r\n  cartSlice.actions;\r\n\r\nexport const selectCartList = (state) => state.cart.cartList;\r\n\r\nexport const selectCartItems = createSelector([selectCartList], (cartList) =>\r\n  cartList.filter((item) => item.addedtocart)\r\n);\r\n\r\nconst saveCartToStorage = async (cartData, userEmail) => {\r\n  try {\r\n    const CART_STORAGE_KEY = `@MyApp:cart:${userEmail}`;\r\n    await AsyncStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cartData));\r\n  } catch (error) {\r\n    console.error(\"Error saving cart data to AsyncStorage:\", error);\r\n  }\r\n};\r\n\r\nexport const loadCartFromStorage = (mail_id) => async (dispatch) => {\r\n  try {\r\n    const CART_STORAGE_KEY = `@MyApp:cart:${mail_id}`;\r\n    const cartData = await AsyncStorage.getItem(CART_STORAGE_KEY);\r\n    if (cartData) {\r\n      dispatch(setCart(JSON.parse(cartData)));\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error loading cart data from AsyncStorage:\", error);\r\n  }\r\n};\r\nexport default cartSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}