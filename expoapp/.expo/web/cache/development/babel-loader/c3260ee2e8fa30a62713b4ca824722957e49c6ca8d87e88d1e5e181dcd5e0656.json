{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport { createSelector } from \"reselect\";\nimport { deals } from \"../../data/DealsData\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nvar initialState = {\n  dealsList: deals\n};\nvar dealSlice = createSlice({\n  name: \"deals\",\n  initialState: initialState,\n  reducers: {\n    toggleWishlist: function toggleWishlist(state, action) {\n      var _action$payload = action.payload,\n        id = _action$payload.id,\n        userEmail = _action$payload.userEmail;\n      var item = state.dealsList.find(function (item) {\n        return item.id === id;\n      });\n      if (item) {\n        item.wishlisted = !item.wishlisted;\n        saveWishlistToStorage(state.dealsList, userEmail);\n      }\n    },\n    setWishlist: function setWishlist(state, action) {\n      state.dealsList = action.payload;\n    }\n  }\n});\nvar _dealSlice$actions = dealSlice.actions,\n  toggleWishlist = _dealSlice$actions.toggleWishlist,\n  setWishlist = _dealSlice$actions.setWishlist;\nexport { toggleWishlist, setWishlist };\nexport var selectDealsList = function selectDealsList(state) {\n  return state.deals.dealsList;\n};\nexport var selectWishlistedItems = createSelector([selectDealsList], function (dealsList) {\n  return dealsList.filter(function (item) {\n    return item.wishlisted;\n  });\n});\nvar saveWishlistToStorage = function () {\n  var _ref = _asyncToGenerator(function* (wishlistData, userEmail) {\n    try {\n      var CART_STORAGE_KEY = `@MyApp:wishlist:${userEmail}`;\n      yield AsyncStorage.setItem(CART_STORAGE_KEY, JSON.stringify(wishlistData));\n    } catch (error) {\n      console.error(\"Error saving cart data to AsyncStorage:\", error);\n    }\n  });\n  return function saveWishlistToStorage(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var loadWishlistFromStorage = function loadWishlistFromStorage(mail_id) {\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch) {\n      try {\n        var CART_STORAGE_KEY = `@MyApp:wishlist:${mail_id}`;\n        var wishlistData = yield AsyncStorage.getItem(CART_STORAGE_KEY);\n        if (wishlistData) {\n          dispatch(setWishlist(JSON.parse(wishlistData)));\n        }\n      } catch (error) {\n        console.error(\"Error loading cart data from AsyncStorage:\", error);\n      }\n    });\n    return function (_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport default dealSlice.reducer;","map":{"version":3,"names":["createSlice","createSelector","deals","AsyncStorage","initialState","dealsList","dealSlice","name","reducers","toggleWishlist","state","action","_action$payload","payload","id","userEmail","item","find","wishlisted","saveWishlistToStorage","setWishlist","_dealSlice$actions","actions","selectDealsList","selectWishlistedItems","filter","_ref","_asyncToGenerator","wishlistData","CART_STORAGE_KEY","setItem","JSON","stringify","error","console","_x","_x2","apply","arguments","loadWishlistFromStorage","mail_id","_ref2","dispatch","getItem","parse","_x3","reducer"],"sources":["C:/Users/Sailesh/Desktop/Hubspire/react-native/expoapp/app/redux/reducers/dealSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { createSelector } from \"reselect\";\r\nimport { deals } from \"../../data/DealsData\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nconst initialState = {\r\n  dealsList: deals,\r\n};\r\n\r\nconst dealSlice = createSlice({\r\n  name: \"deals\",\r\n  initialState,\r\n  reducers: {\r\n    toggleWishlist: (state, action) => {\r\n      const { id, userEmail } = action.payload;\r\n      const item = state.dealsList.find((item) => item.id === id);\r\n      if (item) {\r\n        item.wishlisted = !item.wishlisted;\r\n        saveWishlistToStorage(state.dealsList, userEmail);\r\n      }\r\n    },\r\n    setWishlist: (state, action) => {\r\n      state.dealsList = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { toggleWishlist, setWishlist } = dealSlice.actions;\r\n\r\nexport const selectDealsList = (state) => state.deals.dealsList;\r\n\r\nexport const selectWishlistedItems = createSelector(\r\n  [selectDealsList],\r\n  (dealsList) => dealsList.filter((item) => item.wishlisted)\r\n);\r\n\r\nconst saveWishlistToStorage = async (wishlistData, userEmail) => {\r\n  try {\r\n    const CART_STORAGE_KEY = `@MyApp:wishlist:${userEmail}`;\r\n    await AsyncStorage.setItem(CART_STORAGE_KEY, JSON.stringify(wishlistData));\r\n  } catch (error) {\r\n    console.error(\"Error saving cart data to AsyncStorage:\", error);\r\n  }\r\n};\r\n\r\nexport const loadWishlistFromStorage = (mail_id) => async (dispatch) => {\r\n  try {\r\n    const CART_STORAGE_KEY = `@MyApp:wishlist:${mail_id}`;\r\n    const wishlistData = await AsyncStorage.getItem(CART_STORAGE_KEY);\r\n    if (wishlistData) {\r\n      dispatch(setWishlist(JSON.parse(wishlistData)));\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error loading cart data from AsyncStorage:\", error);\r\n  }\r\n};\r\n\r\nexport default dealSlice.reducer;\r\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,cAAc,QAAQ,UAAU;AACzC,SAASC,KAAK;AACd,OAAOC,YAAY,MAAM,2CAA2C;AAEpE,IAAMC,YAAY,GAAG;EACnBC,SAAS,EAAEH;AACb,CAAC;AAED,IAAMI,SAAS,GAAGN,WAAW,CAAC;EAC5BO,IAAI,EAAE,OAAO;EACbH,YAAY,EAAZA,YAAY;EACZI,QAAQ,EAAE;IACRC,cAAc,EAAE,SAAAA,eAACC,KAAK,EAAEC,MAAM,EAAK;MACjC,IAAAC,eAAA,GAA0BD,MAAM,CAACE,OAAO;QAAhCC,EAAE,GAAAF,eAAA,CAAFE,EAAE;QAAEC,SAAS,GAAAH,eAAA,CAATG,SAAS;MACrB,IAAMC,IAAI,GAAGN,KAAK,CAACL,SAAS,CAACY,IAAI,CAAC,UAACD,IAAI;QAAA,OAAKA,IAAI,CAACF,EAAE,KAAKA,EAAE;MAAA,EAAC;MAC3D,IAAIE,IAAI,EAAE;QACRA,IAAI,CAACE,UAAU,GAAG,CAACF,IAAI,CAACE,UAAU;QAClCC,qBAAqB,CAACT,KAAK,CAACL,SAAS,EAAEU,SAAS,CAAC;MACnD;IACF,CAAC;IACDK,WAAW,EAAE,SAAAA,YAACV,KAAK,EAAEC,MAAM,EAAK;MAC9BD,KAAK,CAACL,SAAS,GAAGM,MAAM,CAACE,OAAO;IAClC;EACF;AACF,CAAC,CAAC;AAEK,IAAAQ,kBAAA,GAAwCf,SAAS,CAACgB,OAAO;EAAjDb,cAAc,GAAAY,kBAAA,CAAdZ,cAAc;EAAEW,WAAW,GAAAC,kBAAA,CAAXD,WAAW;AAAuB,SAAAX,cAAA,EAAAW,WAAA;AAEjE,OAAO,IAAMG,eAAe,GAAG,SAAlBA,eAAeA,CAAIb,KAAK;EAAA,OAAKA,KAAK,CAACR,KAAK,CAACG,SAAS;AAAA;AAE/D,OAAO,IAAMmB,qBAAqB,GAAGvB,cAAc,CACjD,CAACsB,eAAe,CAAC,EACjB,UAAClB,SAAS;EAAA,OAAKA,SAAS,CAACoB,MAAM,CAAC,UAACT,IAAI;IAAA,OAAKA,IAAI,CAACE,UAAU;EAAA,EAAC;AAAA,CAC5D,CAAC;AAED,IAAMC,qBAAqB;EAAA,IAAAO,IAAA,GAAAC,iBAAA,CAAG,WAAOC,YAAY,EAAEb,SAAS,EAAK;IAC/D,IAAI;MACF,IAAMc,gBAAgB,GAAI,mBAAkBd,SAAU,EAAC;MACvD,MAAMZ,YAAY,CAAC2B,OAAO,CAACD,gBAAgB,EAAEE,IAAI,CAACC,SAAS,CAACJ,YAAY,CAAC,CAAC;IAC5E,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;IACjE;EACF,CAAC;EAAA,gBAPKd,qBAAqBA,CAAAgB,EAAA,EAAAC,GAAA;IAAA,OAAAV,IAAA,CAAAW,KAAA,OAAAC,SAAA;EAAA;AAAA,GAO1B;AAED,OAAO,IAAMC,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAAIC,OAAO;EAAA;IAAA,IAAAC,KAAA,GAAAd,iBAAA,CAAK,WAAOe,QAAQ,EAAK;MACtE,IAAI;QACF,IAAMb,gBAAgB,GAAI,mBAAkBW,OAAQ,EAAC;QACrD,IAAMZ,YAAY,SAASzB,YAAY,CAACwC,OAAO,CAACd,gBAAgB,CAAC;QACjE,IAAID,YAAY,EAAE;UAChBc,QAAQ,CAACtB,WAAW,CAACW,IAAI,CAACa,KAAK,CAAChB,YAAY,CAAC,CAAC,CAAC;QACjD;MACF,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;MACpE;IACF,CAAC;IAAA,iBAAAY,GAAA;MAAA,OAAAJ,KAAA,CAAAJ,KAAA,OAAAC,SAAA;IAAA;EAAA;AAAA;AAED,eAAehC,SAAS,CAACwC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}